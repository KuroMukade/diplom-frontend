"use strict";(self.webpackChunkulbi_course=self.webpackChunkulbi_course||[]).push([[632],{3632:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Z});var r=t(2373),a=t(8709),o=t(9016),i=t(9958),l=t(1050),u=t(229),c=t(6568),s=t(8901),d=t(1338),f=t(1895),p=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.isLoading)||!1},v=function(e){var n;return null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.error},h=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.email)||""},b=function(e){var n;return(null===(n=null==e?void 0:e.loginForm)||void 0===n?void 0:n.password)||""},y=t(8019),m=t(3581),w=t(2386),g=t(8899),x=(0,y.hg)("login/loginByEmail",(function(e,n){return t=void 0,r=void 0,o=function(){var t,r,a,o,i;return function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=n.call(e,i)}catch(e){l=[6,e],r=0}finally{t=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}(this,(function(l){switch(l.label){case 0:t=n.dispatch,r=n.extra,a=n.rejectWithValue,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,r.api.post("/login",e)];case 2:if(!(o=l.sent()).data)throw new Error;return localStorage.setItem(g.z,JSON.stringify(o.data)),t(m.hI.setAuthData(o.data)),null===(i=r.navigate)||void 0===i||i.call(r,"/profile"),[2,o.data];case 3:return l.sent(),[2,a(w.a.t("Вы ввели неверный логин или пароль"))];case 4:return[2]}}))},new((a=void 0)||(a=Promise))((function(e,n){function i(e){try{u(o.next(e))}catch(e){n(e)}}function l(e){try{u(o.throw(e))}catch(e){n(e)}}function u(n){var t;n.done?e(n.value):(t=n.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}u((o=o.apply(t,r||[])).next())}));var t,r,a,o})),j=(0,y.oM)({name:"login",initialState:{email:"",password:"",isLoading:!1},reducers:{setEmail:function(e,n){e.email=n.payload},setPassword:function(e,n){e.password=n.payload}},extraReducers:function(e){e.addCase(x.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(x.fulfilled,(function(e){e.isLoading=!1})).addCase(x.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload}))}}),k=j.actions,C=j.reducer,E=t(5081),I=function(){return I=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},I.apply(this,arguments)},N={loginForm:C};const Z=(0,a.memo)((function(e){var n=e.className,t=e.onSuccess,y=(0,o.$)().t,m=(0,c.T)(),w=(0,i.v9)(h),g=(0,i.v9)(b),j=(0,i.v9)(p),C=(0,i.v9)(v);(0,f.q)("loginForm",N,!0);var Z=(0,a.useCallback)((function(e){m(k.setEmail(e))}),[m]),O=(0,a.useCallback)((function(e){m(k.setPassword(e))}),[m]),S=(0,a.useCallback)((function(){return e=void 0,n=void 0,a=function(){return function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=n.call(e,i)}catch(e){l=[6,e],r=0}finally{t=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}(this,(function(e){switch(e.label){case 0:return[4,m(x({email:w,password:g}))];case 1:return"fulfilled"===e.sent().meta.requestStatus&&(null==t||t()),[2]}}))},new((r=void 0)||(r=Promise))((function(t,o){function i(e){try{u(a.next(e))}catch(e){o(e)}}function l(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,l)}u((a=a.apply(e,n||[])).next())}));var e,n,r,a}),[m,t,g,w]);return(0,r.jsxs)("div",I({className:(0,l.A)(E.Z.wrapper,{},[n])},{children:[(0,r.jsx)(d.xv,{theme:d.lg.CLEAR,className:E.Z.title,title:y("Авторизация")}),C&&(0,r.jsx)(d.xv,{theme:d.lg.ERROR,text:C}),(0,r.jsxs)("div",I({className:E.Z.inputWrapper},{children:[(0,r.jsx)(s.I,{tabIndex:-1,className:E.Z.username,value:w,placeholder:y("Почта"),onChange:Z,type:"text"}),(0,r.jsx)(s.I,{tabIndex:-2,className:E.Z.password,value:g,placeholder:y("Пароль"),onChange:O,type:"password"})]})),(0,r.jsx)(u.zx,I({growthColor:u.Bc.DEFAULT,className:E.Z.btn,disabled:j,onClick:S,theme:u.UH.OUTLINE},{children:y("Войти")}))]}))}))},6568:(e,n,t)=>{t.d(n,{T:()=>a});var r=t(9958),a=function(){return(0,r.I0)()}},1895:(e,n,t)=>{t.d(n,{q:()=>o});var r=t(8709),a=t(9958);function o(e,n,t){var o=(0,a.oR)(),i=(0,a.I0)();(0,r.useEffect)((function(){return Object.entries(n).forEach((function(n){var t=n[0],r=n[1];o.reducerManager.add(t,r),i({type:"@INIT ".concat(e," reducer")})})),function(){t&&Object.entries(n).forEach((function(n){var t=n[0];o.reducerManager.remove(t),i({type:"@DESTROY ".concat(e," reducer")})}))}}),[i,e,n,t,o])}},8901:(e,n,t)=>{t.d(n,{I:()=>l});var r=t(2373),a=t(8709),o=t(1050),i=t(8297),l=(0,a.memo)((function(e){var n,t=e.className,a=e.onChange,l=e.value,u=e.type,c=void 0===u?"text":u,s=e.placeholder,d=void 0===s?"":s,f=e.readonly,p=void 0!==f&&f,v=((n={})[i.Z.readonly]=p,n);return(0,r.jsx)("input",{value:l,type:c,placeholder:d,onChange:function(e){null==a||a(e.target.value)},readOnly:p,className:(0,o.A)(i.Z.input,v,[t])})}))},5081:(e,n,t)=>{t.d(n,{Z:()=>r});const r={wrapper:"xBRPBmZv",title:"Iq4FjuZp",inputWrapper:"gC6fxt43",btn:"jUz10wi3"};var a=t(3067)(e.id,{locals:!0});e.hot.dispose(a)},8297:(e,n,t)=>{t.d(n,{Z:()=>r});const r={input:"LVdIPwcx",readonly:"fTN1PnWu"};var a=t(3067)(e.id,{locals:!0});e.hot.dispose(a)}}]);