"use strict";(self.webpackChunkulbi_course=self.webpackChunkulbi_course||[]).push([[903],{2903:(e,t,n)=>{n.r(t),n.d(t,{CreateTaskForm:()=>E,default:()=>N});var r=n(2373),a=n(8709),o=n(9958),i=n(9016),l=n(1050),c=n(8901),u=n(229),s=n(1338),d=n(6568),f=n(1895),p=n(3969),v=n(8019),h=n(9954),y=n(2386),b=(0,v.hg)("task/createTask",(function(e,t){return n=void 0,r=void 0,o=function(){var n,r,a,o;return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}(this,(function(i){switch(i.label){case 0:n=t.dispatch,r=t.extra,a=t.rejectWithValue,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.api.post("/todos/".concat(e.todoId,"/tasks"),{title:e.title,text:e.text,priority:e.priority})];case 2:if(!(o=i.sent()).data)throw new Error;return console.log(o),n(h.MK.addTask(o.data)),[2,o.data];case 3:return i.sent(),[2,a(y.a.t("Неверный формат"))];case 4:return[2]}}))},new((a=void 0)||(a=Promise))((function(e,t){function i(e){try{c(o.next(e))}catch(e){t(e)}}function l(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(i,l)}c((o=o.apply(n,r||[])).next())}));var n,r,a,o})),x=(0,v.oM)({name:"createTask",initialState:{isLoading:!1,title:"",priority:"LOW",text:""},reducers:{setTitle:function(e,t){e.title=t.payload},setPriority:function(e,t){e.priority=t.payload},setText:function(e,t){e.text=t.payload}},extraReducers:function(e){e.addCase(b.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(b.fulfilled,(function(e){e.isLoading=!1})).addCase(b.rejected,(function(e,t){e.isLoading=!1,e.error=t.payload}))}}),k=x.reducer,w=x.actions,g=function(e){var t;return(null===(t=e.createTask)||void 0===t?void 0:t.title)||""},m=function(e){var t;return(null===(t=e.createTask)||void 0===t?void 0:t.text)||""},T=function(e){var t;return(null===(t=e.createTask)||void 0===t?void 0:t.priority)||"LOW"},C=function(e){var t;return(null===(t=e.createTask)||void 0===t?void 0:t.isLoading)||!1},j=function(e){var t;return null===(t=e.createTask)||void 0===t?void 0:t.error},I=n(5712),L=function(){return L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},L.apply(this,arguments)},O={createTask:k},E=(0,a.memo)((function(e){var t=e.className,n=e.onSuccess,v=e.todoId,h=(0,i.$)().t,y=(0,d.T)(),x=(0,o.v9)(g),k=(0,o.v9)(m),E=(0,o.v9)(T),N=(0,o.v9)(C),S=(0,o.v9)(j);(0,f.q)("createTask",O,!0);var Z=(0,a.useCallback)((function(){return e=void 0,t=void 0,a=function(){return function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}(this,(function(e){switch(e.label){case 0:return[4,y(b({todoId:v,priority:E,title:x,text:k}))];case 1:return"fulfilled"===e.sent().meta.requestStatus&&(null==n||n()),[2]}}))},new((r=void 0)||(r=Promise))((function(n,o){function i(e){try{c(a.next(e))}catch(e){o(e)}}function l(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,l)}c((a=a.apply(e,t||[])).next())}));var e,t,r,a}),[y,n,E,k,x,v]),R=(0,a.useCallback)((function(e){y(w.setTitle(e))}),[y]),W=(0,a.useCallback)((function(e){y(w.setText(e))}),[y]),P=(0,a.useCallback)((function(e){y(w.setPriority(e))}),[y]);return(0,r.jsxs)("div",L({className:(0,l.A)(I.Z.wrapper,{},[t])},{children:[(0,r.jsx)(s.xv,{textSize:s.yH.LARGE,theme:s.lg.CLEAR,className:I.Z.title,title:h("Создание задачи")}),S&&(0,r.jsx)(s.xv,{theme:s.lg.ERROR,text:S}),(0,r.jsxs)("div",L({className:I.Z.inputWrapper},{children:[(0,r.jsx)(c.I,{onChange:R,value:x,placeholder:h("Название задачи")}),(0,r.jsx)(c.I,{onChange:W,value:k,placeholder:h("Содержимое задачи")}),(0,r.jsx)(p.Z,{defaultValue:{label:"Маленький",value:"LOW"},selectOptions:[{label:"Маленький",value:"LOW"},{label:"Средний",value:"MEDIUM"},{label:"Срочно",value:"HIGH"}],onChange:function(e){return P(e.value)}})]})),(0,r.jsx)(u.zx,L({disabled:N,onClick:Z,className:I.Z.btn,theme:u.UH.OUTLINE,growthColor:u.Bc.DEFAULT},{children:h("Создать задачу")}))]}))}));const N=E},1895:(e,t,n)=>{n.d(t,{q:()=>o});var r=n(8709),a=n(9958);function o(e,t,n){var o=(0,a.oR)(),i=(0,a.I0)();(0,r.useEffect)((function(){return Object.entries(t).forEach((function(t){var n=t[0],r=t[1];o.reducerManager.add(n,r),i({type:"@INIT ".concat(e," reducer")})})),function(){n&&Object.entries(t).forEach((function(t){var n=t[0];o.reducerManager.remove(n),i({type:"@DESTROY ".concat(e," reducer")})}))}}),[i,e,t,n,o])}},8901:(e,t,n)=>{n.d(t,{I:()=>l});var r=n(2373),a=n(8709),o=n(1050),i=n(8297),l=(0,a.memo)((function(e){var t,n=e.className,a=e.onChange,l=e.value,c=e.type,u=void 0===c?"text":c,s=e.placeholder,d=void 0===s?"":s,f=e.readonly,p=void 0!==f&&f,v=((t={})[i.Z.readonly]=p,t);return(0,r.jsx)("input",{value:l,type:u,placeholder:d,onChange:function(e){null==a||a(e.target.value)},readOnly:p,className:(0,o.A)(i.Z.input,v,[n])})}))},5712:(e,t,n)=>{n.d(t,{Z:()=>r});const r={inputWrapper:"ne_8GeXe",wrapper:"IsmDCkvQ"};var a=n(3067)(e.id,{locals:!0});e.hot.dispose(a)},8297:(e,t,n)=>{n.d(t,{Z:()=>r});const r={input:"LVdIPwcx",readonly:"fTN1PnWu"};var a=n(3067)(e.id,{locals:!0});e.hot.dispose(a)}}]);